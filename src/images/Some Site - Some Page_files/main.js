"use strict";var elemHero1=document.querySelector(".hero"),objHero=new Hero(elemHero1);function Hero(t){var e=this,o={start:function(){},stop:function(){},play:function(){o.start(),setTimeout(o.stop,300)}};return this.action={jump:function(){return o.stop(),o.start=function(){return t.classList.add("hero_jump")},o.stop=function(){return t.classList.remove("hero_jump")},o.play(),e}},this}
"use strict";function FunText(){var a=document.querySelector(".fun-text"),e=a.innerText;a.innerHTML="";var l=["fadeIn","fadeInUp","fadeInLeft","fadeInRight"],i=Math.floor(Math.random()*l.length);e.split("").map(function(e,n){console.log(n);var t=document.createElement("span");e=" "===e?"&nbsp;":e,t.innerHTML=e,t.className=l[i],t.style.display="inline-block",t.style.animationDelay=100*n+"ms",a.appendChild(t)})}
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var activeDrawsList=[],showFrameRate=!1;function animate(t){var i="number"==typeof(t="object"==_typeof(t)?t:{}).duration?t.duration:1e3,e="number"==typeof t.delay?t.delay:0,n="number"==typeof t.from?t.from:1,o="number"==typeof t.to?t.to:100,f="function"==typeof t.timing?t.timing:linear,c="function"==typeof t.draw?t.draw:function(t){console.log(100*t)},s="function"==typeof t.before?t.before:function(){},m="function"==typeof t.after?t.after:function(){},p=n/100,y=o/100;setTimeout(function(){for(var a=performance.now(),u=a,t=activeDrawsList.length-1;0<=t;t--)if(activeDrawsList[t]===c)return!1;activeDrawsList.push(c);requestAnimationFrame(function t(e){s&&(s(),s=!1);var n=(e-a)/i;if(1<n&&(n=1),p<y)var o=(n+=p)<y;else o=y<(n=-(n-p));var r=f(n);c(r),o?(requestAnimationFrame(t),showFrameRate&&(console.log(frameRate(u,e),Math.round(100*n)),u=e)):(activeDrawsList.splice(activeDrawsList.indexOf(c),1),m&&m())})},e)}function frameRate(t,e){return Math.round(1e3/(e-t))}function zone(t,e,n,o){if(n*=100,o*=100,(e*=100)<=(t*=100)&&t<=n){var r=(t-e)/(n-e);return o&&o(r),r}return t<=e?0:n<=t?1:void 0}function makeEaseOut(e){return function(t){return 1-e(1-t)}}function makeEaseInOut(e){return function(t){return t<.5?e(2*t)/2:(2-e(2*(1-t)))/2}}function linear(t){return t}function quad(t){return Math.pow(t,2)}var quadEaseOut=makeEaseOut(quad);function circ(t){return 1-Math.sin(Math.acos(t))}var circEaseOut=makeEaseOut(circ);function back(t,e){return Math.pow(e,2)*((t+1)*e-t)}var backEaseOut=makeEaseOut(back);function bounce(t){for(var e=0,n=1;;e+=n,n/=2)if((7-4*e)/11<=t)return-Math.pow((11-6*e-11*t)/4,2)+Math.pow(n,2)}var bounceEaseOut=makeEaseOut(bounce);function elastic(t,e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}var elasticEaseOut=makeEaseOut(elastic);
"use strict";function ready(e){document.addEventListener("DOMContentLoaded",e)}function addEvent(e,t,n){null!=e&&void 0!==e&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n)}function compareRandom(e,t){return Math.random()-.5}function getDocument(e,t){var n=new XMLHttpRequest;n.open("GET",e),n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=(new DOMParser).parseFromString(this.responseText,"text/html");t(e)}},n.send(null)}function getCookie(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}!function(e,t,n){n=n||window;var o=!1;n.addEventListener(e,function(){o||(o=!0,requestAnimationFrame(function(){n.dispatchEvent(new CustomEvent(t)),o=!1}))})}("resize","optimizedResize");
"use strict";var breakpoint={small:767,medium:992,large:1200};function respondTo(i,n,e,t){if(i>=window.innerWidth){var r=!0;e&&requestAnimationFrame(n)}else r=!1;t&&window.addEventListener("optimizedResize",function(){if(!r&&(r=!0,i>=window.innerWidth))return setTimeout(function(){requestAnimationFrame(n)},100),!0;i<=window.innerWidth&&(r=!1)})}function respondFrom(i,n,e,t){if(i<=window.innerWidth){var r=!0;e&&requestAnimationFrame(n)}else r=!1;t&&window.addEventListener("optimizedResize",function(){if(!r&&(r=!0,i<=window.innerWidth))return setTimeout(function(){requestAnimationFrame(n)},100),!0;i>=window.innerWidth&&(r=!1)})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlcm8uanMiLCJhbmltYXRpb25zL2Z1blRleHQuanMiLCJjb21tb24vYW5pbWF0ZS5qcyIsImNvbW1vbi9oZWxwZXJzLmpzIiwiY29tbW9uL3Jlc3BvbmQuanMiXSwibmFtZXMiOlsiZWxlbUhlcm8xIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiSGVybyIsImVsZW1IZXJvIiwiX3RoaXMiLCJ0aGlzIiwiYWN0aW9uIiwic3RhcnQiLCJwbGF5Iiwic2V0VGltZW91dCIsInN0b3AiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJGdW5UZXh0IiwiZWxlbVRleHQiLCJ0ZXh0IiwiaW5uZXJUZXh0IiwiYW5pbWF0aW9ucyIsInJhbmQiLCJzcGxpdCIsImNvbnNvbGUiLCJpbm5lckhUTUwiLCJmbG9vciIsInN5bWJvbCIsInJhbmRvbSIsImxlbmd0aCIsInNwYW4iLCJzdHlsZSIsImRpc3BsYXkiLCJpbmRleCIsImFuaW1hdGlvbkRlbGF5IiwiYXBwZW5kQ2hpbGQiLCJjbGFzc05hbWUiLCJhY3RpdmVEcmF3c0xpc3QiLCJzaG93RnJhbWVSYXRlIiwiYW5pbWF0ZSIsIm9wdGlvbnMiLCJfdHlwZW9mIiwiZHVyYXRpb24iLCJkZWxheSIsImZyb20iLCJ0byIsImxpbmVhciIsImRyYXciLCJwcm9ncmVzcyIsImxvZyIsImJlZm9yZSIsImFmdGVyIiwibm93IiwiZnJhY3Rpb25Gcm9tIiwiaSIsInBlcmZvcm1hbmNlIiwicHVzaCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInRpbWUiLCJhbmltYXRpb25JbmRleCIsInRpbWVGcmFjdGlvbiIsImZyYWN0aW9uVG8iLCJ0aW1pbmciLCJ0ZXJtaW5hdGlvbkNvbmRpdGlvbiIsImZyYW1lUmF0ZSIsInRpbWVMYXN0IiwiTWF0aCIsInJvdW5kIiwidGltZU5vdyIsImN1cnJlbnQiLCJtYWtlRWFzZU91dCIsIm1ha2VFYXNlSW5PdXQiLCJxdWFkIiwicXVhZEVhc2VPdXQiLCJzaW4iLCJhY29zIiwiY2lyY0Vhc2VPdXQiLCJiYWNrIiwieCIsInBvdyIsImJhY2tFYXNlT3V0IiwiYm91bmNlIiwiYSIsImIiLCJib3VuY2VFYXNlT3V0IiwiZWxhc3RpYyIsImNvcyIsIlBJIiwicmVhZHkiLCJsaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudCIsIm9iamVjdCIsInR5cGUiLCJhdHRhY2hFdmVudCIsImNvbXBhcmVSYW5kb20iLCJnZXREb2N1bWVudCIsInVybCIsImNhbGxiYWNrIiwiaHR0cCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJkb2MiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJyZXNwb25zZVRleHQiLCJzZW5kIiwiZ2V0Q29va2llIiwibWF0Y2hlcyIsIm5hbWUiLCJyZXBsYWNlIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwidW5kZWZpbmVkIiwib2JqIiwid2luZG93IiwicnVubmluZyIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImJyZWFrcG9pbnQiLCJzbWFsbCIsImxhcmdlIiwicmVzcG9uZFRvIiwicnVuV2hlbkNhbGxlZCIsImlubmVyV2lkdGgiLCJhY3RpdmUiLCJyZXNwb25kRnJvbSJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBTUEsVUFBWUMsU0FBU0MsY0FBYyxTQUFuQ0YsUUFBWUMsSUFBQUEsS0FBU0MsV0FJM0IsU0FBU0MsS0FBS0MsR0FBVSxJQUFBQyxFQUFBQyxLQUFBQyxFQUFBLENBR2hCQyxNQUFTLGFBRFBELEtBQVMsYUFDWEUsS0FBUyxXQUVERixFQUFBQyxRQUNBRSxXQUFBSCxFQUFNSSxLQUFBLE9BVUssT0FkdkJMLEtBQUFDLE9BQUEsQ0FVS0EsS0FBUyxXQUdTLE9BRlZBLEVBQUFJLE9BQ0NKLEVBQU5DLE1BQUEsV0FBQSxPQUFBSixFQUFBUSxVQUFBQyxJQUFBLGNBRUFOLEVBQU9JLEtBQVEsV0FBQSxPQUFNUCxFQUFTUSxVQUFVRSxPQUFPLGNBRHpDUCxF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Q0hyQyxHQUFpQjJCLE9BQUFTLFlBS0YsT0FITGxILFdBQVQsV0FJUTZDLHNCQUFzQnlDLElBSGhCLE1BRUMsRUFHWHVCLEdBQUFKLE9BQUFTLGFBQUFDLEdBQUEsS0FJWCxTQVpEQyxZQUFBUCxFQUFBdkIsRUFBQTJCLEVBQUFsQyxHQWFILEdBQUE4QixHQUFBSixPQUFBUyxXQUFBLENBQ0osSUFBQUMsR0FBQSxFQUtXRixHQUhIRyxzQkFBd0I5QixRQU9yQjZCLEdBQVMsRUFGWnBDLEdBSkwwQixPQUtPM0IsaUJBQUEsa0JBQUEsV0FDQ3FDLElBQVNBLElBQ2hCQSxHQUFBLEVBTWVOLEdBQWNKLE9BQU9TLFlBS3JCLE9BUkxwQyxXQUFpQixXQUNQakMsc0JBQUF5QyxJQUNULE1BTVcsRUFGSHpDLEdBQUFBLE9BQXNCeUMsYUFBdEI2QixHQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBlbGVtSGVybzEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVybycpO1xuXG5jb25zdCBvYmpIZXJvID0gbmV3IEhlcm8oZWxlbUhlcm8xKTtcblxuZnVuY3Rpb24gSGVybyhlbGVtSGVybykge1xuICAgIC8vIGNvbnNvbGUubG9nKGVsZW1IZXJvKTtcbiAgICBjb25zdCBhY3Rpb24gPSB7XG4gICAgICAgICdzdGFydCc6ICgpID0+IHtcbiAgICAgICAgfSxcbiAgICAgICAgJ3N0b3AnOiAoKSA9PiB7fSxcbiAgICAgICAgJ3BsYXknOiAoKSA9PiB7XG4gICAgICAgICAgICBhY3Rpb24uc3RhcnQoKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoYWN0aW9uLnN0b3AsIDMwMCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5hY3Rpb24gPSB7XG4gICAgICAgICdqdW1wJyA6ICgpID0+IHtcbiAgICAgICAgICAgIGFjdGlvbi5zdG9wKCk7XG4gICAgICAgICAgICBhY3Rpb24uc3RhcnQgPSAoKSA9PiBlbGVtSGVyby5jbGFzc0xpc3QuYWRkKCdoZXJvX2p1bXAnKTtcbiAgICAgICAgICAgIGFjdGlvbi5zdG9wICA9ICgpID0+IGVsZW1IZXJvLmNsYXNzTGlzdC5yZW1vdmUoJ2hlcm9fanVtcCcpO1xuICAgICAgICAgICAgYWN0aW9uLnBsYXkoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzO1xufVxuIiwiZnVuY3Rpb24gRnVuVGV4dCgpIHtcbiAgICBsZXQgZWxlbVRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZnVuLXRleHQnKTtcbiAgICBsZXQgdGV4dCA9IGVsZW1UZXh0LmlubmVyVGV4dDtcbiAgICBlbGVtVGV4dC5pbm5lckhUTUwgPSAnJztcblxuICAgIGxldCBhbmltYXRpb25zID0gW1xuICAgICAgICAnZmFkZUluJyxcbiAgICAgICAgJ2ZhZGVJblVwJyxcbiAgICAgICAgJ2ZhZGVJbkxlZnQnLFxuICAgICAgICAnZmFkZUluUmlnaHQnLFxuICAgIF07XG5cbiAgICBsZXQgcmFuZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFuaW1hdGlvbnMubGVuZ3RoKTtcblxuICAgIHRleHQuc3BsaXQoJycpLm1hcCgoc3ltYm9sLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhpbmRleCk7XG4gICAgICAgIGxldCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBzeW1ib2wgPSBzeW1ib2wgPT09ICcgJyA/ICcmbmJzcDsnIDogc3ltYm9sO1xuICAgICAgICBzcGFuLmlubmVySFRNTCA9IHN5bWJvbDtcbiAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSBhbmltYXRpb25zW3JhbmRdO1xuICAgICAgICBzcGFuLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICAgICAgc3Bhbi5zdHlsZS5hbmltYXRpb25EZWxheSA9IGluZGV4ICogMTAwICsgJ21zJztcbiAgICAgICAgZWxlbVRleHQuYXBwZW5kQ2hpbGQoc3Bhbik7XG4gICAgfSk7XG59IiwidmFyIGFjdGl2ZURyYXdzTGlzdCA9IFtdO1xudmFyIHNob3dGcmFtZVJhdGUgPSBmYWxzZTtcblxuZnVuY3Rpb24gYW5pbWF0ZShvcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgID0gKHR5cGVvZihvcHRpb25zKSAgICAgICAgICA9PSAnb2JqZWN0JykgICA/IG9wdGlvbnMgICAgICAgICAgOiB7fTtcbiAgICB2YXIgZHVyYXRpb24gPSAodHlwZW9mKG9wdGlvbnMuZHVyYXRpb24pID09ICdudW1iZXInKSAgID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDA7XG4gICAgdmFyIGRlbGF5ICAgID0gKHR5cGVvZihvcHRpb25zLmRlbGF5KSAgICA9PSAnbnVtYmVyJykgICA/IG9wdGlvbnMuZGVsYXkgICAgOiAwO1xuICAgIHZhciBmcm9tICAgICA9ICh0eXBlb2Yob3B0aW9ucy5mcm9tKSAgICAgPT0gJ251bWJlcicpICAgPyBvcHRpb25zLmZyb20gICAgIDogMTtcbiAgICB2YXIgdG8gICAgICAgPSAodHlwZW9mKG9wdGlvbnMudG8pICAgICAgID09ICdudW1iZXInKSAgID8gb3B0aW9ucy50byAgICAgICA6IDEwMDtcbiAgICB2YXIgdGltaW5nICAgPSAodHlwZW9mKG9wdGlvbnMudGltaW5nKSAgID09ICdmdW5jdGlvbicpID8gb3B0aW9ucy50aW1pbmcgICA6IGxpbmVhcjtcbiAgICB2YXIgZHJhdyAgICAgPSAodHlwZW9mKG9wdGlvbnMuZHJhdykgICAgID09ICdmdW5jdGlvbicpID8gb3B0aW9ucy5kcmF3ICAgICA6IGZ1bmN0aW9uKHByb2dyZXNzKXtjb25zb2xlLmxvZyhwcm9ncmVzcyAqIDEwMCl9O1xuICAgIHZhciBiZWZvcmUgICA9ICh0eXBlb2Yob3B0aW9ucy5iZWZvcmUpICAgPT0gJ2Z1bmN0aW9uJykgPyBvcHRpb25zLmJlZm9yZSAgIDogZnVuY3Rpb24oKSB7fTtcbiAgICB2YXIgYWZ0ZXIgICAgPSAodHlwZW9mKG9wdGlvbnMuYWZ0ZXIpICAgID09ICdmdW5jdGlvbicpID8gb3B0aW9ucy5hZnRlciAgICA6IGZ1bmN0aW9uKCkge307XG5cbiAgICB2YXIgZnJhY3Rpb25Gcm9tID0gZnJvbSAvIDEwMDtcbiAgICB2YXIgZnJhY3Rpb25UbyAgID0gdG8gLyAxMDA7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc3RhcnQgICAgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgdmFyIHRpbWVMYXN0ID0gc3RhcnQ7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IGFjdGl2ZURyYXdzTGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYgKGFjdGl2ZURyYXdzTGlzdFtpXSA9PT0gZHJhdykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgYW5pbWF0aW9uSW5kZXggPSBhY3RpdmVEcmF3c0xpc3QucHVzaChkcmF3KTtcblxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gYW5pbWF0ZSh0aW1lKSB7XG4gICAgICAgICAgICBpZiAoYmVmb3JlKSB7XG4gICAgICAgICAgICAgICAgYmVmb3JlKCk7XG4gICAgICAgICAgICAgICAgYmVmb3JlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGltZUZyYWN0aW9uID0gKHRpbWUgLSBzdGFydCkgLyBkdXJhdGlvbjtcbiAgICAgICAgICAgIGlmICh0aW1lRnJhY3Rpb24gPiAxKSB0aW1lRnJhY3Rpb24gPSAxO1xuXG4gICAgICAgICAgICBpZiAoZnJhY3Rpb25Gcm9tIDwgZnJhY3Rpb25Ubykge1xuICAgICAgICAgICAgICAgIHRpbWVGcmFjdGlvbiA9IHRpbWVGcmFjdGlvbiArIGZyYWN0aW9uRnJvbTtcbiAgICAgICAgICAgICAgICB2YXIgdGVybWluYXRpb25Db25kaXRpb24gPSB0aW1lRnJhY3Rpb24gPCBmcmFjdGlvblRvO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aW1lRnJhY3Rpb24gPSAtKHRpbWVGcmFjdGlvbiAtIGZyYWN0aW9uRnJvbSk7XG4gICAgICAgICAgICAgICAgdmFyIHRlcm1pbmF0aW9uQ29uZGl0aW9uID0gdGltZUZyYWN0aW9uID4gZnJhY3Rpb25UbztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gdGltaW5nKHRpbWVGcmFjdGlvbik7XG5cbiAgICAgICAgICAgIGRyYXcocHJvZ3Jlc3MpO1xuXG4gICAgICAgICAgICBpZiAodGVybWluYXRpb25Db25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2hvd0ZyYW1lUmF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmcmFtZVJhdGUodGltZUxhc3QsIHRpbWUpLCBNYXRoLnJvdW5kKHRpbWVGcmFjdGlvbiAqIDEwMCkpO1xuICAgICAgICAgICAgICAgICAgICB0aW1lTGFzdCA9IHRpbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhY3RpdmVEcmF3c0xpc3Quc3BsaWNlKGFjdGl2ZURyYXdzTGlzdC5pbmRleE9mKGRyYXcpLCAxKTtcbiAgICAgICAgICAgICAgICBpZiAoYWZ0ZXIpIGFmdGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sIGRlbGF5KTtcbn1cblxuZnVuY3Rpb24gZnJhbWVSYXRlKHRpbWVMYXN0LCB0aW1lTm93KSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoMTAwMCAvICh0aW1lTm93IC0gdGltZUxhc3QpKTtcbn1cblxuZnVuY3Rpb24gem9uZShjdXJyZW50LCBmcm9tLCB0bywgZHJhdykge1xuICAgIGN1cnJlbnQgPSBjdXJyZW50ICogMTAwO1xuICAgIGZyb20gICAgPSBmcm9tICogMTAwO1xuICAgIHRvICAgICAgPSB0byAqIDEwMDtcbiAgICBkcmF3ICAgID0gZHJhdyAqIDEwMDtcblxuICAgIGlmIChjdXJyZW50ID49IGZyb20gJiYgY3VycmVudCA8PSB0bykge1xuICAgICAgICB2YXIgcHJvZ3Jlc3MgPSAoY3VycmVudCAtIGZyb20pIC8gKHRvIC0gZnJvbSk7XG4gICAgICAgIGlmIChkcmF3KSBkcmF3KHByb2dyZXNzKTtcbiAgICAgICAgcmV0dXJuIHByb2dyZXNzO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudCA8PSBmcm9tKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSBpZiAoY3VycmVudCA+PSB0bykge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG59XG5cblxuLy8g0L/RgNC10L7QsdGA0LDQt9C+0LLQsNGC0LXQu9GMINCyIGVhc2VPdXRcbmZ1bmN0aW9uIG1ha2VFYXNlT3V0KHRpbWluZykge1xuICAgIHJldHVybiBmdW5jdGlvbih0aW1lRnJhY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIDEgLSB0aW1pbmcoMSAtIHRpbWVGcmFjdGlvbik7XG4gICAgfVxufVxuLy8g0L/RgNC10L7QsdGA0LDQt9C+0LLQsNGC0LXQu9GMINCyIGVhc2VPdXRcbmZ1bmN0aW9uIG1ha2VFYXNlSW5PdXQodGltaW5nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHRpbWVGcmFjdGlvbikge1xuICAgICAgICBpZiAodGltZUZyYWN0aW9uIDwgMC41KVxuICAgICAgICAgICAgcmV0dXJuIHRpbWluZygyICogdGltZUZyYWN0aW9uKSAvIDI7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiAoMiAtIHRpbWluZygyICogKDEgLSB0aW1lRnJhY3Rpb24pKSkgLyAyO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbGluZWFyKHByb2dyZXNzKSB7XG4gICAgcmV0dXJuIHByb2dyZXNzO1xufVxuXG5mdW5jdGlvbiBxdWFkKHByb2dyZXNzKSB7XG4gICAgcmV0dXJuIE1hdGgucG93KHByb2dyZXNzLCAyKTtcbn1cbnZhciBxdWFkRWFzZU91dCA9IG1ha2VFYXNlT3V0KHF1YWQpO1xuXG5mdW5jdGlvbiBjaXJjKHRpbWVGcmFjdGlvbikge1xuICAgIHJldHVybiAxIC0gTWF0aC5zaW4oTWF0aC5hY29zKHRpbWVGcmFjdGlvbikpXG59XG52YXIgY2lyY0Vhc2VPdXQgPSBtYWtlRWFzZU91dChjaXJjKTtcblxuZnVuY3Rpb24gYmFjayh4LCB0aW1lRnJhY3Rpb24pIHtcbiAgICByZXR1cm4gTWF0aC5wb3codGltZUZyYWN0aW9uLCAyKSAqICgoeCArIDEpICogdGltZUZyYWN0aW9uIC0geClcbn1cbnZhciBiYWNrRWFzZU91dCA9IG1ha2VFYXNlT3V0KGJhY2spO1xuXG5mdW5jdGlvbiBib3VuY2UocHJvZ3Jlc3MpIHtcbiAgICBmb3IgKHZhciBhID0gMCwgYiA9IDEsIHJlc3VsdDsgMTsgYSArPSBiLCBiIC89IDIpIHtcbiAgICAgICAgaWYgKHByb2dyZXNzID49ICg3IC0gNCAqIGEpIC8gMTEpIHtcbiAgICAgICAgICAgIHJldHVybiAtTWF0aC5wb3coKDExIC0gNiAqIGEgLSAxMSAqIHByb2dyZXNzKSAvIDQsIDIpICsgTWF0aC5wb3coYiwgMik7XG4gICAgICAgIH1cbiAgICB9XG59XG52YXIgYm91bmNlRWFzZU91dCA9IG1ha2VFYXNlT3V0KGJvdW5jZSk7XG5cbmZ1bmN0aW9uIGVsYXN0aWMoeCwgdGltZUZyYWN0aW9uKSB7XG4gICAgcmV0dXJuIE1hdGgucG93KDIsIDEwICogKHRpbWVGcmFjdGlvbiAtIDEpKSAqIE1hdGguY29zKDIwICogTWF0aC5QSSAqIHggLyAzICogdGltZUZyYWN0aW9uKVxufVxudmFyIGVsYXN0aWNFYXNlT3V0ID0gbWFrZUVhc2VPdXQoZWxhc3RpYyk7XG4iLCIvKipcbiAqINCh0L7QutGA0LDRidC10L3QuNC1INC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDRgdC+0LHRi9GC0LjRjyBET01Db250ZW50TG9hZGVkXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBD0LvRg9GI0LDRgtC10LvRjCDRgdC+0LHRi9GC0LjRj1xuICovXG5mdW5jdGlvbiByZWFkeShsaXN0ZW5lcikge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGxpc3RlbmVyKTtcbn1cblxuLyoqXG4gKiBDdXN0b20gRXZlbnQgUmVzaXplXG4gKi9cbihmdW5jdGlvbigpIHtcbiAgICB2YXIgdGhyb3R0bGUgPSBmdW5jdGlvbih0eXBlLCBuYW1lLCBvYmopIHtcbiAgICAgICAgb2JqID0gb2JqIHx8IHdpbmRvdztcbiAgICAgICAgdmFyIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgdmFyIGZ1bmMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChydW5uaW5nKSB7IHJldHVybjsgfVxuICAgICAgICAgICAgcnVubmluZyA9IHRydWU7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgb2JqLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KG5hbWUpKTtcbiAgICAgICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZnVuYyk7XG4gICAgfTtcblxuICAgIC8qIGluaXQgLSB5b3UgY2FuIGluaXQgYW55IGV2ZW50ICovXG4gICAgdGhyb3R0bGUoXCJyZXNpemVcIiwgXCJvcHRpbWl6ZWRSZXNpemVcIik7XG59KSgpO1xuXG5cbi8qKlxuICog0JTQvtCx0LDQstC70LXQvdC40LUg0YHQvtCx0YvRgtC40LlcbiAqIEBwYXJhbSB7W3R5cGVdfSAgIG9iamVjdCAgIERPTSDRg9C30LXQu1xuICogQHBhcmFtIHtzdHJpbmd9ICAgdHlwZSAgICAg0KLQuNC/INC/0YDQvtGB0LvRg9GI0LjQstCw0LXQvNC+0LPQviDRgdC+0LHRi9GC0LjRjy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIEPQu9GD0YjQsNGC0LXQu9GMINGB0L7QsdGL0YLQuNGPXG4gKi9cbmZ1bmN0aW9uIGFkZEV2ZW50KG9iamVjdCwgdHlwZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAob2JqZWN0ID09IG51bGwgfHwgdHlwZW9mKG9iamVjdCkgPT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcbiAgICBpZiAob2JqZWN0LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgb2JqZWN0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKG9iamVjdC5hdHRhY2hFdmVudCkge1xuICAgICAgICBvYmplY3QuYXR0YWNoRXZlbnQoXCJvblwiICsgdHlwZSwgbGlzdGVuZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdFtcIm9uXCIgKyB0eXBlXSA9IGxpc3RlbmVyO1xuICAgIH1cbn07XG5cbi8qKlxuICog0YFvbXBhcmVGdW5jdGlvbiDQtNC70Y8gYXJyLnNvcnQsINC00LvRjyDRgdC+0YDRgtC40YDQvtC60Lgg0YHQu9GD0YfQudC90L7QvCDQv9C+0YDRj9C00LrQtVxuICovXG5mdW5jdGlvbiBjb21wYXJlUmFuZG9tKGEsIGIpIHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAtIDAuNTtcbn1cblxuLyoqXG4gKiDQn9C+0LvRg9GH0LXQvdC40LUgRE9NINC00LXRgNC10LLQsCDQtNGA0YPQs9C+0Lkg0YHRgtGA0LDQvdC40YbRi1xuICogQHBhcmFtICB7U3RyaW5nfSAgIHVybCAgICAgIFVSTCDRgdGC0YDQsNC90LjRhtGLXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gY2FsbGJhY2sg0J/QtdGA0LXQtNCw0LLQsNC10LzQsNGPINGE0YPQvdC60YbQuNGPXG4gKi9cbmZ1bmN0aW9uIGdldERvY3VtZW50KHVybCwgY2FsbGJhY2spXG57XG4gIHZhciBodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gIGh0dHAub3BlbignR0VUJywgdXJsKTtcbiAgaHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKVxuICB7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PSA0ICYmIHRoaXMuc3RhdHVzID09IDIwMCkge1xuICAgICAgdmFyIGRvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcodGhpcy5yZXNwb25zZVRleHQsIFwidGV4dC9odG1sXCIpOyAgLy8g0L/RgNC10L7QsdGA0LDQt9C+0LLQsNGC0Ywg0YLQtdC60YHRgiDQsiBIVE1MXG5cbiAgICAgIGNhbGxiYWNrKGRvYyk7XG4gICAgfVxuICB9XG4gIGh0dHAuc2VuZChudWxsKTtcbn1cblxuLyoqXG4gKiAg0LLQvtC30LLRgNCw0YnQsNC10YIgY29va2llINGBINC40LzQtdC90LXQvCBuYW1lLCDQtdGB0LvQuCDQtdGB0YLRjCwg0LXRgdC70Lgg0L3QtdGCLCDRgtC+IHVuZGVmaW5lZFxuICovXG5mdW5jdGlvbiBnZXRDb29raWUobmFtZSkge1xuICB2YXIgbWF0Y2hlcyA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKFxuICAgIFwiKD86Xnw7IClcIiArIG5hbWUucmVwbGFjZSgvKFtcXC4kPyp8e31cXChcXClcXFtcXF1cXFxcXFwvXFwrXl0pL2csICdcXFxcJDEnKSArIFwiPShbXjtdKilcIlxuICApKTtcbiAgcmV0dXJuIG1hdGNoZXMgPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hlc1sxXSkgOiB1bmRlZmluZWQ7XG59XG4iLCJ2YXIgYnJlYWtwb2ludCA9IHtcbiAgICAnc21hbGwnOiA3NjcsXG4gICAgJ21lZGl1bSc6IDk5MixcbiAgICAnbGFyZ2UnOiAxMjAwXG59O1xuXG5mdW5jdGlvbiByZXNwb25kVG8oYnJlYWtwb2ludCwgY2FsbGJhY2ssIHJ1bldoZW5DYWxsZWQsIGFkZEV2ZW50KSB7XG4gICAgaWYgKGJyZWFrcG9pbnQgPj0gd2luZG93LmlubmVyV2lkdGgpIHtcbiAgICAgICAgdmFyIGFjdGl2ZSA9IHRydWU7XG4gICAgICAgIGlmIChydW5XaGVuQ2FsbGVkKSB7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChhZGRFdmVudCkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9wdGltaXplZFJlc2l6ZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoYnJlYWtwb2ludCA+PSB3aW5kb3cuaW5uZXJXaWR0aCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChicmVha3BvaW50IDw9IHdpbmRvdy5pbm5lcldpZHRoKSBhY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZXNwb25kRnJvbShicmVha3BvaW50LCBjYWxsYmFjaywgcnVuV2hlbkNhbGxlZCwgYWRkRXZlbnQpIHtcbiAgICBpZiAoYnJlYWtwb2ludCA8PSB3aW5kb3cuaW5uZXJXaWR0aCkge1xuICAgICAgICB2YXIgYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgaWYgKHJ1bldoZW5DYWxsZWQpIHtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYWN0aXZlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGFkZEV2ZW50KSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3B0aW1pemVkUmVzaXplXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCFhY3RpdmUpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChicmVha3BvaW50IDw9IHdpbmRvdy5pbm5lcldpZHRoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJyZWFrcG9pbnQgPj0gd2luZG93LmlubmVyV2lkdGgpIGFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iXX0=
